CREATE DATABASE shortly_api;

CREATE TABLE users (
	id SERIAL PRIMARY KEY,
	name VARCHAR(90) NOT NULL UNIQUE,
	email TEXT NOT NULL UNIQUE,
	password VARCHAR(50) NOT NULL
);

CREATE TABLE links (
	id SERIAL PRIMARY KEY,
	"userId" INTEGER NOT NULL REFERENCES "users"("id"),
	"url" TEXT NOT NULL,
	"shortUrl" TEXT NOT NULL,
	"visitCount" INTEGER NOT NULL
);

CREATE TABLE sessions (
	id SERIAL PRIMARY KEY,
	"userId" INTEGER NOT NULL REFERENCES "users"("id"),
	token TEXT NOT NULL
);

CREATE TABLE ranking (
	id SERIAL PRIMARY KEY,
	"userId" INTEGER NOT NULL REFERENCES "users"("id"),
	"linksCount" INTEGER NOT NULL,
	"allVisitCount" INTEGER NOT NULL
);